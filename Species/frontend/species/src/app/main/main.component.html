


  <!-- <div class="map" #map>hello</div> -->

<app-header></app-header>


<div class="chat-container">

    <div class="chat-area" [ngClass]="{ 'sidebar-closed': !sidebarOpen }">
      <div class="messages-container">
        @if (messages.length === 0) {
          
          <div class="preload">
          <iframe 
          src="https://lottie.host/embed/28a9f450-3e50-40d1-be61-c587ec791060/yGQpcY5SsY.json" 
          style="width: 400px; height: 350px;" 
          frameborder="0">
      </iframe>
      <div class="presuggestion">
        <h3>Hello!! {{value}} Welcome To MarineAI</h3>
        <div class="carddisplay">
      <div class="card" *ngFor="let i of startQuestion" (click)="onQuestionClick(i.question)">
          <h3 class="card__title">{{i.title}}
          </h3>
          <p class="card__content">{{i.question}}</p>

          <div class="card__arrow" (click)="onQuestionClick(i.question)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                  <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
              </svg   >
          </div>
      </div>
      </div>
      </div>
      
      </div>
      
          }
          <div *ngFor="let message of messages" class="message-container">
            <!-- Bot Message -->
            <div *ngIf="message.type === 'bot'" class="bot-message">
              <div *ngIf="!message.imageUrl" [innerHTML]="message.content"></div>
            </div>
          
            <!-- User Message -->
            <div *ngIf="message.type === 'user'" class="user-message">
              {{ message.content }}
            </div>
          
            <!-- Images in a row -->
            <div class="image-row">
              <div *ngIf="message.imageUrl" class="image-container">
                <img
                  [src]="message.imageUrl"
                  alt="Uploaded image"
                  class="uploaded-image"
                  [style.maxWidth]="'100%'"
                  [style.height]="'auto'"
                />
              </div>
            </div>
          </div>
                                
   <!-- <div id="map" style="height: 500px;"></div> -->

        @if(!load){
          <ol class="question-list">
            <li *ngFor="let question of questions" (click)="onQuestionClick(question)">
              {{ question }}
            </li>
          </ol>
        }
        

        
      

      
      </div>
      @if(load){
        <div class="loader"x>
          <div aria-label="Orange and tan hamster running in a metal wheel" role="img" class="wheel-and-hamster">
            <div class="wheel"></div>
            <div class="hamster">
              <div class="hamster__body">
                <div class="hamster__head">
                  <div class="hamster__ear"></div>
                  <div class="hamster__eye"></div>
                  <div class="hamster__nose"></div>
                </div>
                <div class="hamster__limb hamster__limb--fr"></div>
                <div class="hamster__limb hamster__limb--fl"></div>
                <div class="hamster__limb hamster__limb--br"></div>
                <div class="hamster__limb hamster__limb--bl"></div>
                <div class="hamster__tail"></div>
              </div>
            </div>
            <div class="spoke"></div>
          </div>
          <div>
              <div class="spinner">
                <span>L</span>
                <span>O</span>
                <span>A</span>
                <span>D</span>
                <span>I</span>
                <span>N</span>
                <span>G</span>
              </div>
          </div>
        </div>

      }
      <div class="footer">
          <div class="promptcontainer">
      <div class="input-container" >
        <div>
          <label class="upload-container">
            <input type="file" multiple (change)="handleFileInput($event)" [(ngModel)]="fileInputValue" class="file-input" [disabled]="load" />
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g id="SVGRepo_iconCarrier">
                <path d="M13 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V11" stroke="#512da8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 16L8.29289 11.7071C8.68342 11.3166 9.31658 11.3166 9.70711 11.7071L13 15M13 15L15.7929 12.2071C16.1834 11.8166 16.8166 11.8166 17.2071 12.2071L20 15M13 15L15.25 17.25" stroke="#512da8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M18 8V3M18 3L16 5M18 3L20 5" stroke="#512da8 " stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              </g>
            </svg>          
          </label>
        </div>
        
        <div>
          <span *ngIf="imagePreviewUrl" class="image-preview">
            <img [src]="imagePreviewUrl" alt="Preview" class="preview-image"/>
          </span>
        </div>
        
        <div class="mic">
            <label class="container">
                <input checked="checked" type="checkbox" [(ngModel)]="isMic"(change)="startSpeechRecognition()">
                <svg viewBox="0 0 640 512" height="1em" xmlns="http://www.w3.org/2000/svg" class="microphone-slash"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zM344 430.4c20.4-2.8 39.7-9.1 57.3-18.2l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4z"></path></svg>
                  <svg viewBox="0 0 384 512" height="1em" xmlns="http://www.w3.org/2000/svg" class="microphone"><path d="M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"></path></svg>
              </label>
        </div>
        <textarea 
        [(ngModel)]="userInput" 
        name="userInput" 
        placeholder="Type your message here..." 
        class="input-box" 
        rows="1"
        (input)="autoResize($event)"
        required>
      </textarea>
      
        <div>
            <button type="button" class="icon-button"  [disabled]="load"(click)="sendMessage()">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M11.5003 12H5.41872M5.24634 12.7972L4.24158 15.7986C3.69128 17.4424 3.41613 18.2643 3.61359 18.7704C3.78506 19.21 4.15335 19.5432 4.6078 19.6701C5.13111 19.8161 5.92151 19.4604 7.50231 18.7491L17.6367 14.1886C19.1797 13.4942 19.9512 13.1471 20.1896 12.6648C20.3968 12.2458 20.3968 11.7541 20.1896 11.3351C19.9512 10.8529 19.1797 10.5057 17.6367 9.81135L7.48483 5.24303C5.90879 4.53382 5.12078 4.17921 4.59799 4.32468C4.14397 4.45101 3.77572 4.78336 3.60365 5.22209C3.40551 5.72728 3.67772 6.54741 4.22215 8.18767L5.24829 11.2793C5.34179 11.561 5.38855 11.7019 5.407 11.8459C5.42338 11.9738 5.42321 12.1032 5.40651 12.231C5.38768 12.375 5.34057 12.5157 5.24634 12.7972Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>        </button>
        </div>  
      </div>

  </div>
  <p class="warn"><sup>*</sup>The text generated by this app is for informational purposes only and may not be 100% accurate.</p>
</div>
</div>
  